<h2><strong>GUI Overview</strong></h2>
<ul>
<li><b>Config Basics</b> tab: input parameters common to all models (e.g., domain grid, simulation time, choice/frequency of outputs)</li>
<li><b>Microenvironment</b> tab:&nbsp;&nbsp; microenvironment parameters that are model-specific</li>
<li><b>User Params</b> tab:&nbsp;&nbsp; input parameters that are model-specific</li>
<li><b>Out: Plots</b> tab:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; output display of cells and substrates</li>
</ul>
Clicking the 'Run' button will use the specified parameters and start a simulation. When clicked, it creates an "Output" widget
that can be clicked/expanded to reveal the progress (text) of the simulation. When the simulation generates output file(s),
they can be visualized in the appropriate output tabs. The "Max" count in each output tab will be dynamically updated 
as those output files are generated by the running simulation. When the "Run" button is clicked, it toggles to a "Cancel" button
that will terminate (not pause) the simulation.


<h2><strong>Introduction: a simulation of biorobots</strong></h2>

3 cell types: cargo cells, worker cells (which seek out cargo
cells and haul them to a destination), and director cells (which attract worker cells).

<worker_color type="string" units="none" hidden="true">red</worker_color>
<cargo_color type="string" units="none" hidden="true">blue</cargo_color>
<director_color type="string" units="none" hidden="true">limegreen</director_color>

<p>This app demonstrates how simple &quot;rules&quot; for three types of agents (biorobots)
    and two substrates (signals).

<p>In this simulation, 
<span style="font-weight: bold; color: red;">&quot;worker bots&quot; (red)</span> seek out 
<span style="font-weight: bold; color: blue;">&quot;cargo&quot; (blue)</span>, form focal adhesions, and 
haul the cargo towards 
<span style="font-weight: bold; color: green;">&quot;director agents&quot; (green)</span>
where the cargo is released.
</p>

<p style="text-align: center;"><a href="#instructions"><strong>Click here to jump straight to the 
instructions.&nbsp;</strong></a></p>

<p>This model and cloud-hosted demo are part of a course on computational multicellular systems biology created and 
taught by Dr. Paul Macklin in the Department of Intelligent Systems Engineering at Indiana University. It is also 
part of the education and outreach for the IU Engineered nanoBIO Node and the NCI-funded cancer systems biology 
grant U01CA232137. The models are built using 
<a href="https://journals.plos.org/ploscompbiol/article?id=10.1371/journal.pcbi.1005991" target="_blank">PhysiCell</a>: a 
C++ framework for multicellular systems biology [1].</p>

<h2><strong>Signals</strong></h2>

<p>There are two (chemical) signals move by chemical diffusion in the simulated environment, using 
<a href="http://dx.doi.org/10.1093/bioinformatics/btv730" target="_blank">BioFVM</a> [2] to solve the reaction-diffusion 
equations. A key property is the <em>diffusion length scale</em>. Diffusion (with a diffusion coefficient <em>D</em>) helps 
spread a signal over large distances, while decay (and uptake) (with coefficient <em>&lambda;</em>) eliminates the signal to 
slow its spread. These effects compete to determine the characteristic distance <i>L</i> that a chemical signal travels.</p>

<p>That length scale <em>L</em> is given by <em>L</em> = sqrt( <em>D</em>/&lambda; ).</p>

<p>Choosing <em>D</em> and <em>&lambda;</em> can help to tune the chemical communication distance in these models.</p>

<h3>Director signal:</h3>

<p>Director cells secrete a diffusible chemoattractant, but are otherwise stationary agents.

<h3>Cargo signal:</h3>

<p>Cargo cells secrete a diffusible chemoattractant.
This factor is released by undocked cargo to help guide chemotaxis by the worker biorobots.</p>

<p>The chemoattractant is nondimensionalized so that 0 &le; <em>a</em> &le; 1, and we initially assign a length scale of 100 &mu;m.</p>

<h2><b>Agents:</b></h2>

<p>We use agent-based models to explore multicellular systems like this one. Each cell is modeled as a software agent with an 
independent state, and its own rules to change its behavior based on local environmental conditions and communication. We 
use PhysiCell as our modeling platform [1].&nbsp;</p>

<h3>Key features in this models:</h3>

<h4>Secretion and uptake:</h4>

<p>Agents can secrete chemical factors, or they can remove them (i.e., consume or uptake). This can contribute to gradients in 
chemical factors, and it&#39;s a key method of communication between cells. Moreover, cells can &quot;sample&quot; the 
chemical state of their surrounding environment. Secreting is sending a signal. Uptaking and sampling is receiving a signal.</p>

<h4>Biased migration:</h4>

<p>Motile cells perform <em>biased migration</em>. After traveling for <em>T</em><sub>persistence</sub> time (the mean 
persistence time), they choose a new migration direction <span style="font-weight: bold;">d</span><sub>migrate</sub>. Based on 
the environmental conditions, the cell chooses a directional bias (intended direction) 
<span style="font-weight: bold;">d</span><sub>bias</sub> and a random unit vector 
<span style="font-weight: bold;">r</span>. The motile direction <span style="font-weight: bold;">d</span><sub>migrate</sub> 
is then determined by according to:</p>

<p style="text-align: center;"><span style="font-weight: bold;">d</span><sub>migrate</sub> = b <span style="font-weight: bold;">d</span><sub>bias</sub> + (1-b) <span style="font-weight: bold;">r</span>.</p>

<p>Here, <em>b</em> is a <em>bias</em> parameter (between 0 and 1) that determines how strongly biased migration is towards 
<span style="font-weight: bold;">d</span><sub>bias</sub>. If <em>b</em> =1, then migration is deterministic towards 
<span style="font-weight: bold;">d</span><sub>bias</sub>. If <em>b</em> = 0, then migration is completely random (Brownian).</p>

<p>Once the migration direction is chosen, it is normalized, and multiplied by the cell&#39;s migration speed.</p>

<h4>Mechanics:</h4>

<p>Cell agents can stick to one another within a prescribed interaction distance (some multiple of their radius), and they can 
exert a pushing force on neighbors. PhysiCell [1] uses potential functions to implement these simple mechanics. Notably, 
PhysiCell is an off-lattice model, meaning that cells can have variable sizes, and can move freely without grid artifacts.</p>

<h4 id="focal_adhesions">Focal adhesions:</h4>

<p>PhysiCell allows custom functions for any cell agents. We use this to model focal cell-cell adhesions as spring-like forces. 
If two cells (agents) <em>i</em> and <em>j</em> (with positions <span style="font-weight:bold">x</span><sub>i</sub> and 
<span style="font-weight:bold">x</span><sub>j</sub>) have a focal adhesion, then cell <em>i</em> is adhered to cell 
<em>j</em> with a spring-like force that we model as:</p>

<p style="text-align: center;"><span style="font-weight:bold">F</span><sub>ij</sub> = <em>&epsilon;</em> (<span style="font-weight: bold;">x</span><sub><em>j</em></sub> - <span style="font-weight: bold;">x</span><sub><em>i</em></sub>),</p>

<p>where <em>&epsilon;</em> is the elastic coefficient. Because PhysiCell has an inertialess formatulation (see the method 
paper in [1]), this is added directly to the cell&#39;s velocity, and so <em>&epsilon;</em> has units min<sup>-1</sup>. 
To model the finite deformability of cells and these elastic focual adhesions, we detach the cells if their distance 
(||<span style="font-weight: bold;">x</span><sub><em>j</em></sub> - <span style="font-weight: bold;">x</span><sub><em>j</em></sub>||) exceeds a set maximum distance <em>r</em><sub>max</sub>.</p>

<h3>Worker cells (<span style="color: red">red</span>)</h3>

<p>Worker cells (biorobots) do not divide, but they can be assigned an apoptotic death rate to model normal &quot;wear and tear.&quot; 
We model workers as non-adhesive except by spring-like focal adhesions; see <a href="#focal_adhesions">focal adhesions</a>. They 
are made more &quot;repulsive&quot; (by default, fivefold more repulsive) to allow them to more readily move through dense 
cellular regions. Worker cells consume oxygen, but at a reduced rate (by default, 10% of the rate of cancer cells).</p>

<p><span style="font-weight: bold">Unattached</span> worker cells use the following as their migration bias direction:&nbsp;</p>

<p style="text-align: center;"><span style="font-weight: bold;">d</span><sub>bias</sub> = &nabla;<em>a</em>,</p>

<p>where <em>a</em> is the chemoattractant released by unattached cargo cells. Note that &nabla; is the gradient operator 
that points towards higher concentrations of a chemical factor.</p>

<p>Unattached worker cells test for near contact with unattached cargo cells. If they detect an unattached cargo cell with 
active receptor <i>R</i> (<em>R</em> &asymp; 1), they form a focal adhesion (see <a href="#focal_adhesions">focal adhesions</a>).</p>

<p><span style="font-weight: bold">Attached</span> worker cells change their migration bias direction to:</p>

<p style="text-align: center;"><span style="font-weight: bold;">d</span><sub>bias</sub> = -&nabla;<em>&sigma;</em>,</p>

<p>where <em>&sigma;</em> is the oxygen.</p>

<h3>Cargo cells (<span style="color: blue;">blue</span>)</h3>

<p>Cargo cells do not divide, but they can be assigned an apoptotic death rate to model normal &quot;wear and tear.&quot; 
We model cargo as non-adhesive except by spring-like focal adhesions; see <a href="#focal_adhesions">focal adhesions</a>. 
They are made more &quot;repulsive&quot; (by default, fivefold more repulsive) to allow them to more readily move through dense 
cellular regions. Cargo cells consume oxygen, but at a reduced rate (by default, 10% of the rate of cancer cells). Note 
that all cargo cells are non-motile.</p>

<p>Initially, all cargo cells express a receptor <em>R</em> with dimensionless value 1, which is used to control their chemical 
secretions. If <em>R</em> = 1, they secrete chemoattractant <em>a</em> to help guide worker cells. If <em>R</em> = 0 and 
they are unattached, then they secrete the therapeutic <em>c</em>.</p>

<p>Cargo cells permanently deactivate their receptor (set <em>R</em> = 0) once they are attached to a worker cell. They 
detach from worker cells if <em>&sigma;</em> &lt; <em>&sigma;</em><sub>release</sub>.</p>

<h2><a id="instructions" name="instructions">Basic instructions</a></h2>

<p>Modify the parameters in the &quot;Config Basics&quot; and &quot;User Params&quot; tabs. Click the &quot;Run&quot; button once ready.</p>

<p>To view the output results, click the &quot;Out:Plots&quot; tab, and click/drag the slider to advance through simulation frames. (You can also use the left/right arrow buttons to move the slider if it's selected.)
Note that as the simulation runs, the &quot;# frames&quot; field (maximum frame number) will increase, so you can view more simulation frames. You can toggle on/off the display of either cells or substrates, assuming you selected them to be computed in the &quot;Config Basics&quot; tab. And you can select different substrates and different colormaps from the dropdown widgets.</p>

<p>Note that you can download full simulation data for further exploration in your tools of choice.</p>

